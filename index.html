<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" href="BCLogo.png">
    <meta property="og:title"
        content="BaghChal - Classical" />
     <meta property="og:url"
        content="https://baghchal-online.vercel.app" />
    <meta property="og:image"
        content="BCLogo.png" />
    <meta property="og:description"
        content="Multiplayer - BaghChal Game with Classical theme. Play For Fun!" />
    <meta property="og:type"
        content="website" />
    <title>Bagh-Chal: Classical</title>
    <script
        src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js">
    </script>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="Baghchal.css">
</head>
<body>
    <div id="disconnect-overlay">
        <div class="modal">
            <h1
                style="color:var(--tiger-text)">
                FRIEND DEPARTED</h1>
            <p id="reload-timer"
                style="font-style: italic;">
                Returning To Lobby in
                3...</p>
        </div>
    </div>
    
    <div id="screen-home"
        class="screen active">
        <div class="menu-card">
            <h1
                style="font-size: 2.8rem; margin-bottom: 10px;">
                BAGH CHAL</h1>
            <div
                style="width: 50px; height: 2px; background: var(--wood-dark); margin: 0 auto 30px;">
            </div>
            <button
                class="menu-btn primary"
                onclick="startLocalMultiplayer()">Offline
                (2P)</button>
            <button class="menu-btn"
                onclick="showOnlinePanel()">Online
                (P2P)</button>
            <button class="menu-btn"
                style="border:none; font-size: 0.9rem; margin-top:10px;"
                onclick="alert('Goats win by surrounding Tigers.\nTigers win by capturing 5 Goats.\n Note: If Online game do not Connects. Try Again after refreshing the page!')">Rules
                of Play</button>
        </div>
    </div>
    
    <div id="screen-online"
        class="screen">
        <div class="menu-card">
            <h2>Online Lobby</h2>
            <div id="peer-id-display"
                onclick="copyRoomID()"
                style="padding:15px; border: 1px dashed var(--wood-dark); background:rgba(0,0,0,0.03); margin:15px 0; font-family:monospace; font-size:1.4rem; cursor:pointer;"
                title="Click to Copy">
                Connecting...</div>
            
            <div id="copy-hint"
                style="font-size: 0.8rem; margin-top: -10px; margin-bottom: 10px; opacity: 0.6; font-style: italic; display: none;">
                Click the code to copy.
            </div>
            
            <div
                style="margin: 20px 0; font-style: italic; opacity: 0.7;">
                - or -</div>
            
            <input type="number"
                id="join-id"
                placeholder="Enter Friend's Code"
                inputmode="numeric"
                pattern="[0-9]*">
            
            <div id="join-error">INVALID
                CODE</div>
            
            <button
                class="menu-btn primary"
                onclick="joinRoom()"
                style="margin-top:15px;">Join
                Match</button>
            <button class="menu-btn"
                onclick="showScreen('home')"
                style="border:none;">Return</button>
        </div>
    </div>
    
    <div id="screen-game"
        class="screen">
        <div class="hud">
            <div id="status-label"
                style="font-size: 1.4rem; font-weight:900; text-transform:uppercase; letter-spacing: 1px;">
                Preparing...</div>
            <div class="stats-row">
                <div
                    style="color:var(--goat-text)">
                    Goats: <span
                        id="g-hand">20</span>
                </div>
                <div
                    style="color:var(--tiger-text)">
                    Captured: <span
                        id="g-dead">0/5</span>
                </div>
            </div>
        </div>
        
        <div class="board-wrapper">
            <div id="role-announcer">
            </div>
            <svg id="board-svg"
                viewBox="0 0 320 320"></svg>
            <div id="game-layer"></div>
        </div>
        
        <div class="action-row">
            <button
                class="menu-btn primary"
                onclick="quitGame()"
                style="border:2px solid var(--wood-dark); font-size: 0.9rem;border-radius:8px;flex: 1;">Resign</button>
            
            <div class="chat-btn-wrapper"
                id="chat-toggle-wrapper"
                style="display:none;">
                <button class="menu-btn"
                    onclick="toggleChat()"
                    style="border:2px solid var(--wood-dark);padding: 10px; font-size: 0.9rem; width:100%;border-radius:8px;">
                    CHAT ðŸ’¬
                </button>
                <div id="chat-badge">
                </div>
            </div>
        </div>
    </div>
    
    <div id="chat-mask"
        onclick="toggleChat()"></div>
    
    <div id="chat-panel">
        <div class="chat-header"
            onclick="toggleChat()">
            <span>MATCH CHAT</span>
            <span>â–¼</span>
        </div>
        <div id="chat-messages">
            <div
                style="text-align:center; opacity:0.5; font-style:italic; font-size:0.8rem;">
                Chat is encrypted (P2P)
            </div>
        </div>
        <div
            class="chat-input-container">
            <input type="text"
                id="chat-input"
                placeholder="Send a message..."
                maxlength="100">
            <button
                class="menu-btn primary"
                id="send-btn"
                onclick="sendChat()">âž¤</button>
        </div>
    </div>
    
    <div id="overlay">
        <div class="modal">
            <h1 id="win-msg"
                style="font-size: 2.2rem; margin-bottom: 10px;">
                VICTORY</h1>
            <div
                style="width: 30px; height: 2px; background: var(--wood-dark); margin: 0 auto 20px;">
            </div>
            <p id="win-details"
                style="font-style: italic; margin-bottom: 20px;">
            </p>
            <p id="friend-status"
                style="color:var(--tiger-text); font-weight:bold; height:1.2rem; margin-bottom:15px;">
            </p>
            <button
                class="menu-btn primary"
                id="restart-btn"
                onclick="requestRestart()">Rematch</button>
            <button class="menu-btn"
                onclick="quitGame()">Main
                Menu</button>
        </div>
    </div>
    <script src="Baghchal.js"></script>
</body>

</html>
